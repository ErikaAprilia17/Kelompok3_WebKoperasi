<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Editpassword extends CI_Controller {
	protected $id_admin;
	 function __construct()
    {
        parent::__construct();
        $this->load->model('m_login');
        $this->m_login->cek_session();
        $sess = $this->session->userdata('admin');
        $this->id_admin = $sess['id'];
    }
	public function index()
	{
		$data = array(
			'title' => 'Edit Password',
			'page' => 'admin/v_editpassword',
			'data' => $this->db->where('id', $this->id_admin)->get('admin')->row()
		);
		$this->load->view('admin/layout/template',$data);
	}
	function edit($id){
		$data = array(
			'title' => 'Edit Password',
			'page' => 'admin/v_editpassword',
			'data' => $this->db->where('id',$id)->get('admin')->row(),
			
		);
		$this->load->view('admin/layout/template',$data);
	}

	function update(){
		$id = $this->input->post('id');
		$username = $this->input->post('username');
		$password = $this->input->post('password');

		$data = array(
			'username' => $username,
			'password' => $password,

		);

		$where = array(
		'id' => $id
		);
 
		$this->db->where($where);
		$this->db->update('admin',$data);
		$this->session->set_flashdata('success_tambah','a');
		redirect('admin/editpassword');
	}
}
