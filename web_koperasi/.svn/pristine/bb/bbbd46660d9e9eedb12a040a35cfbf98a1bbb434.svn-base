<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Editprofile extends CI_Controller {
	protected $id_admin;
	 function __construct()
    {
        parent::__construct();
        $this->load->model('m_login');
        $this->m_login->cek_session();
        $sess = $this->session->userdata('admin');
        $this->id_admin = $sess['id'];
    }
	public function index()
	{
		$data = array(
			'title' => 'Edit Profile',
			'page' => 'admin/v_editprofile',
			'data' => $this->db->where('id', $this->id_admin)->get('admin')->row()
		);
		$this->load->view('admin/layout/template',$data);
	}
	function edit($id){
		$data = array(
			'title' => 'Edit Profile',
			'page' => 'admin/v_editprofile',
			'data' => $this->db->where('id',$id)->get('admin')->row(),
			
		);
		$this->load->view('admin/layout/template',$data);
	}

	function update(){
		$id = $this->input->post('id');
		$nama = $this->input->post('nama');
		$email = $this->input->post('email');
		$ttl = $this->input->post('ttl');
		$jk = $this->input->post('jk');
		$no_tlpon = $this->input->post('no_tlpon');
		$status = $this->input->post('status');
		$alamat = $this->input->post('alamat');
		$kota = $this->input->post('kota');
		$agama = $this->input->post('agama');
		$pekerjaan = $this->input->post('pekerjaan');
		
		$data = array(
			'email' => $email,
			'ttl' => $ttl,
			'jk' => $jk,
			'no_tlpon' => $no_tlpon,
			'status' => $status,
			'alamat' => $alamat,
			'kota' => $kota,
			'agama' => $agama,
			'pekerjaan' => $pekerjaan,

		);

		$where = array(
		'id' => $id
		);
 
		$this->db->where($where);
		$this->db->update('admin',$data);
		$this->session->set_flashdata('success_tambah','a');
		redirect('admin/editprofile');
	}
}